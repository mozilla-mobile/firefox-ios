# This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this
# file, You can obtain one at http://mozilla.org/MPL/2.0/.

# This file defines the metrics that are recorded by the Glean SDK. They are
# automatically converted to Swift code at build time using the `glean_parser`
# PyPI package.

# This file is organized (roughly) alphabetically by metric names
# for easy navigation

---
$schema: moz://mozilla.org/schemas/glean/metrics/2-0-0

$tags:
  - ModernOnboarding

###############################################################################
# Modern Onboarding Telemetry Metrics
# 
# This file contains telemetry metrics for tracking user interactions
# during the modern SwiftUI onboarding flow, including:
# - Card views and navigation
# - Button taps (primary, secondary, multiple choice)
# - Onboarding dismissal
#
# These metrics are under the modern_onboarding namespace to distinguish
# them from the legacy onboarding metrics in metrics.yaml
###############################################################################

# Modern onboarding metrics
modern_onboarding:
  card_view:
    type: event
    description: |
      Records when a modern onboarding card is shown
    extra_keys:
      card_type:
        type: string
        description: |
          The name of the presented card.
      sequence_id:
        type: string
        description: |
          The sequence of the cards in the current branch.
      sequence_position:
        type: string
        description: |
          The position of the card in the current branch.
      flow_type:
        type: string
        description: |
          Whether it's a fresh install or an upgrade flow
    bugs:
      - https://github.com/mozilla-mobile/firefox-ios/issues/30844
    data_reviews:
      - https://github.com/mozilla-mobile/firefox-ios/pull/30798
    notification_emails:
      - fx-ios-data-stewards@mozilla.com
    expires: "2026-01-01"
  primary_button_tap:
    type: event
    description: |
      Records when the primary button is tapped during the modern onboarding
    extra_keys:
      card_type:
        type: string
        description: |
          Presented onboarding card (welcome / wallpapers / sign to sync)
      sequence_id:
        type: string
        description: |
          The sequence of the cards in the current branch.
      sequence_position:
        type: string
        description: |
          The position of the card in the current branch.
      flow_type:
        type: string
        description: |
          Whether it's a fresh install or an upgrade flow
      button_action:
        type: string
        description: |
          The action that the button would lead to.
    bugs:
      - https://github.com/mozilla-mobile/firefox-ios/issues/30844
    data_reviews:
      - https://github.com/mozilla-mobile/firefox-ios/pull/30798
    notification_emails:
      - fx-ios-data-stewards@mozilla.com
    expires: "2026-01-01"
  secondary_button_tap:
    type: event
    description: |
      Records when the secondary button is tapped during the modern onboarding
    extra_keys:
      card_type:
        type: string
        description: |
          Presented onboarding card (welcome / wallpapers / sign to sync)
      sequence_id:
        type: string
        description: |
          The sequence of the cards in the current branch.
      sequence_position:
        type: string
        description: |
          The position of the card in the current branch.
      flow_type:
        type: string
        description: |
          Whether it's a fresh install or an upgrade flow
      button_action:
        type: string
        description: |
          The action that the button would lead to.
    bugs:
      - https://github.com/mozilla-mobile/firefox-ios/issues/30844
    data_reviews:
      - https://github.com/mozilla-mobile/firefox-ios/pull/30798
    notification_emails:
      - fx-ios-data-stewards@mozilla.com
    expires: "2026-01-01"
  multiple_choice_button_tap:
    type: event
    description: |
      Records when a multiple choice button is tapped during the modern onboarding
    extra_keys:
      card_type:
        type: string
        description: |
          Presented onboarding card
      sequence_id:
        type: string
        description: |
          The sequence of the cards in the current branch.
      sequence_position:
        type: string
        description: |
          The position of the card in the current branch.
      flow_type:
        type: string
        description: |
          Whether it's a fresh install or an upgrade flow
      button_action:
        type: string
        description: |
          The action that the button would lead to.
    bugs:
      - https://github.com/mozilla-mobile/firefox-ios/issues/30844
    data_reviews:
      - https://github.com/mozilla-mobile/firefox-ios/pull/30798
    notification_emails:
      - fx-ios-data-stewards@mozilla.com
    expires: "2026-01-01"
  close_tap:
    type: event
    description: |
      Records when the user closes the modern onboarding.
    extra_keys:
      card_type:
        type: string
        description: |
          The card presented when the onboarding was closed
      sequence_id:
        type: string
        description: |
          The sequence of the cards in the current branch.
      sequence_position:
        type: string
        description: |
          The position of the card in the current branch.
      flow_type:
        type: string
        description: |
          Whether it's a fresh install or an upgrade flow
    bugs:
      - https://github.com/mozilla-mobile/firefox-ios/issues/30844
    data_reviews:
      - https://github.com/mozilla-mobile/firefox-ios/pull/30798
    notification_emails:
      - fx-ios-data-stewards@mozilla.com
    expires: "2026-01-01"
